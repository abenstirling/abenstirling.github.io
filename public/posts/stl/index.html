<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>.STL Files | Ben Stirling</title><meta name=keywords content><meta name=description content="I am taking a very interesting computer graphics course class and finally learned about curves.
Why do I care? Well, my background is in Computer Aided Design (CAD) and machining, so I have always been interested in the .STL file format which . I had always used the buzzword &ldquo;interpolation&rdquo; without really understanding what it meant.
From my understanding, interpolation is used when we have a set of data points and we need to estimate values between these points."><meta name=author content="Ben Stirling"><link rel=canonical href=https://abenstirling.github.io/posts/stl/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://abenstirling.github.io/logo.ico><link rel=icon type=image/png sizes=16x16 href=https://abenstirling.github.io/logo.ico><link rel=icon type=image/png sizes=32x32 href=https://abenstirling.github.io/logo.ico><link rel=apple-touch-icon href=https://abenstirling.github.io/logo.ico><link rel=mask-icon href=https://abenstirling.github.io/logo.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content=".STL Files"><meta property="og:description" content="I am taking a very interesting computer graphics course class and finally learned about curves.
Why do I care? Well, my background is in Computer Aided Design (CAD) and machining, so I have always been interested in the .STL file format which . I had always used the buzzword &ldquo;interpolation&rdquo; without really understanding what it meant.
From my understanding, interpolation is used when we have a set of data points and we need to estimate values between these points."><meta property="og:type" content="article"><meta property="og:url" content="https://abenstirling.github.io/posts/stl/"><meta property="og:image" content="https://abenstirling.github.io/posts/stl/posts"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-02T09:07:47-08:00"><meta property="article:modified_time" content="2024-03-02T09:07:47-08:00"><meta property="og:site_name" content="Ben Stirling"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://abenstirling.github.io/posts/stl/posts"><meta name=twitter:title content=".STL Files"><meta name=twitter:description content="I am taking a very interesting computer graphics course class and finally learned about curves.
Why do I care? Well, my background is in Computer Aided Design (CAD) and machining, so I have always been interested in the .STL file format which . I had always used the buzzword &ldquo;interpolation&rdquo; without really understanding what it meant.
From my understanding, interpolation is used when we have a set of data points and we need to estimate values between these points."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://abenstirling.github.io/posts/"},{"@type":"ListItem","position":2,"name":".STL Files","item":"https://abenstirling.github.io/posts/stl/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":".STL Files","name":".STL Files","description":"I am taking a very interesting computer graphics course class and finally learned about curves.\nWhy do I care? Well, my background is in Computer Aided Design (CAD) and machining, so I have always been interested in the .STL file format which . I had always used the buzzword \u0026ldquo;interpolation\u0026rdquo; without really understanding what it meant.\nFrom my understanding, interpolation is used when we have a set of data points and we need to estimate values between these points.","keywords":[],"articleBody":"I am taking a very interesting computer graphics course class and finally learned about curves.\nWhy do I care? Well, my background is in Computer Aided Design (CAD) and machining, so I have always been interested in the .STL file format which . I had always used the buzzword “interpolation” without really understanding what it meant.\nFrom my understanding, interpolation is used when we have a set of data points and we need to estimate values between these points. This could be necessary for various reasons, such as creating a smooth curve from discrete data points.\nFor an assignment, I had to implement a Bezier curve and B-spline curves, which are forms of interpolation.\nBezier Curve Implementation:\nThe Bezier curve is drawn using recursive subdivision. The draw function is called with a specified levelOfDetail, which determines how many times the curve will be subdivided. If it’s the top-level call, i.e., levelOfDetail is greater than 0, the control points are connected using the connectTheDots function. If levelOfDetail is 1 or less, the curve is drawn by connecting consecutive control points with straight lines. If levelOfDetail is greater than 1, the control points are recursively subdivided into left and right halves. Then, the draw function is called recursively on each half with a reduced levelOfDetail. This recursive subdivision continues until the base case is reached, where the curve is drawn by connecting consecutive control points with straight lines. B-Spline Implementation:\nThe B-spline curve is drawn using a recursive approach. The draw function is called with a specified levelOfDetail, which determines how many times the curve will be subdivided. The draw function first connects the control points using the connectTheDots function. Then, it iterates through the control points and draws segments between every set of four consecutive points. This is done using the drawSegment function. The drawSegment function calculates the points on the curve segment using the B-spline basis matrix and draws lines between consecutive points. For extra credit, my goal was to do a .STL generation from the curves. My plan is as follows: 1.\nI pulled a titanic on the assignment and didn’t finish the extra credit in time… I tried for another 5 hours. I got some progress when working directly in the Curve.cpp, but still couldn’t get the funky.\nThis is when I realized higher-level programming languages exist for a reason.\nnum_rotations = 20 # Create a list to store rotated curves rotated_curves = [] # Add homogeneous coordinate to each point homogeneous_coordinates = np.column_stack((coordinates, np.ones(len(coordinates)))) # Rotation about x-axis for i in range(num_rotations): angle = 2 * np.pi * i / num_rotations rotation_matrix = np.array([[1, 0, 0], [0, np.cos(angle), -np.sin(angle)], [0, np.sin(angle), np.cos(angle)]]) rotated_coordinates = np.dot(homogeneous_coordinates, rotation_matrix.T) rotated_curves.append(rotated_coordinates) # Create mesh vertices = [] for curve in rotated_curves: vertices.extend(curve) vertices = np.array(vertices) faces = [] for i in range(num_rotations - 1): for j in range(len(coordinates) - 1): p1 = i * len(coordinates) + j p2 = i * len(coordinates) + j + 1 p3 = (i + 1) * len(coordinates) + j p4 = (i + 1) * len(coordinates) + j + 1 faces.append([p1, p2, p3]) faces.append([p2, p4, p3]) for j in range(len(coordinates) - 1): p1 = (num_rotations - 1) * len(coordinates) + j p2 = (num_rotations - 1) * len(coordinates) + j + 1 p3 = j p4 = j + 1 faces.append([p1, p2, p3]) faces.append([p2, p4, p3]) # Create mesh object mesh_data = mesh.Mesh(np.zeros(len(faces), dtype=mesh.Mesh.dtype)) for i, f in enumerate(faces): for j in range(3): mesh_data.vectors[i][j] = vertices[f[j]] # Write the mesh to file \"output.stl\" mesh_data.save('output.stl')``` Fun fact... I have my brain as a .STL file. It took 48 hours to print and is 1:1 scale. ![Brain](/posts/stl_15.png) I swear I didn't scale it up to make myself look smarter. ","wordCount":"622","inLanguage":"en","image":"https://abenstirling.github.io/posts/stl/posts","datePublished":"2024-03-02T09:07:47-08:00","dateModified":"2024-03-02T09:07:47-08:00","author":{"@type":"Person","name":"Ben Stirling"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://abenstirling.github.io/posts/stl/"},"publisher":{"@type":"Organization","name":"Ben Stirling","logo":{"@type":"ImageObject","url":"https://abenstirling.github.io/logo.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://abenstirling.github.io/ accesskey=h title="Ben Stirling (Alt + H)"><img src="https://avatars.githubusercontent.com/u/33791408?v=4" alt aria-label=logo height=35>Ben Stirling</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://github.com/abenstirling/resume_cv/blob/main/Ben%20Stirling%20Resume%202023.pdf title=Resume><span>Resume</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>.STL Files<sup><span class=entry-isdraft>&nbsp;&nbsp;[draft]</span></sup></h1><div class=post-meta><span title='2024-03-02 09:07:47 -0800 PST'>March 2, 2024</span>&nbsp;·&nbsp;Ben Stirling</div></header><figure class=entry-cover><img loading=lazy src=https://abenstirling.github.io/posts/ alt></figure><div class=post-content><p>I am taking a very <a href="https://www.edx.org/learn/computer-graphics/the-university-of-california-san-diego-computer-graphics?objectID=course-f6bc9b9c-e03f-4cde-b09d-bddd82dca299&amp;webview=false&amp;campaign=Computer+Graphics&amp;source=edX&amp;product_category=course&amp;placement_url=https://www.edx.org/bio/ravi-ramamoorthi">interesting computer graphics course</a> class and finally learned about curves.</p><p>Why do I care? Well, my background is in Computer Aided Design (CAD) and machining, so I have always been interested in the .STL file format which .
<img loading=lazy src=/posts/stl_1.png alt="Robotics Image">
<img loading=lazy src=/posts/stl_2.gif alt="Cad Image"></p><p>I had always used the buzzword &ldquo;interpolation&rdquo; without really understanding what it meant.</p><p>From my understanding, interpolation is used when we have a set of data points and we need to estimate values between these points. This could be necessary for various reasons, such as creating a smooth curve from discrete data points.</p><p><img loading=lazy src=/posts/stl_3.gif alt="Interpolation gif"></p><p>For an assignment, I had to implement a Bezier curve and B-spline curves, which are forms of interpolation.</p><p>Bezier Curve Implementation:</p><p>The Bezier curve is drawn using recursive subdivision. The draw function is called with a specified levelOfDetail, which determines how many times the curve will be subdivided.
If it&rsquo;s the top-level call, i.e., levelOfDetail is greater than 0, the control points are connected using the connectTheDots function.
If levelOfDetail is 1 or less, the curve is drawn by connecting consecutive control points with straight lines.
If levelOfDetail is greater than 1, the control points are recursively subdivided into left and right halves. Then, the draw function is called recursively on each half with a reduced levelOfDetail.
This recursive subdivision continues until the base case is reached, where the curve is drawn by connecting consecutive control points with straight lines.
<img loading=lazy src=/posts/stl_4.png alt=Bezier></p><p>B-Spline Implementation:</p><p>The B-spline curve is drawn using a recursive approach. The draw function is called with a specified levelOfDetail, which determines how many times the curve will be subdivided.
The draw function first connects the control points using the connectTheDots function.
Then, it iterates through the control points and draws segments between every set of four consecutive points. This is done using the drawSegment function.
The drawSegment function calculates the points on the curve segment using the B-spline basis matrix and draws lines between consecutive points.
<img loading=lazy src=/posts/stl_5.png alt=Bspline></p><p>For extra credit, my goal was to do a .STL generation from the curves. My plan is as follows:
1.</p><p>I pulled a titanic on the assignment and didn&rsquo;t finish the extra credit in time&mldr; I tried for another 5 hours. I got some progress when working directly in the Curve.cpp, but still couldn&rsquo;t get the funky.</p><p>This is when I realized higher-level programming languages exist for a reason.</p><pre tabindex=0><code class=language-# data-lang=#>num_rotations = 20

# Create a list to store rotated curves
rotated_curves = []

# Add homogeneous coordinate to each point
homogeneous_coordinates = np.column_stack((coordinates, np.ones(len(coordinates))))

# Rotation about x-axis
for i in range(num_rotations):
    angle = 2 * np.pi * i / num_rotations
    rotation_matrix = np.array([[1, 0, 0],
                                [0, np.cos(angle), -np.sin(angle)],
                                [0, np.sin(angle), np.cos(angle)]])
    rotated_coordinates = np.dot(homogeneous_coordinates, rotation_matrix.T)
    rotated_curves.append(rotated_coordinates)

# Create mesh
vertices = []
for curve in rotated_curves:
    vertices.extend(curve)
vertices = np.array(vertices)
faces = []
for i in range(num_rotations - 1):
    for j in range(len(coordinates) - 1):
        p1 = i * len(coordinates) + j
        p2 = i * len(coordinates) + j + 1
        p3 = (i + 1) * len(coordinates) + j
        p4 = (i + 1) * len(coordinates) + j + 1
        faces.append([p1, p2, p3])
        faces.append([p2, p4, p3])
for j in range(len(coordinates) - 1):
    p1 = (num_rotations - 1) * len(coordinates) + j
    p2 = (num_rotations - 1) * len(coordinates) + j + 1
    p3 = j
    p4 = j + 1
    faces.append([p1, p2, p3])
    faces.append([p2, p4, p3])

# Create mesh object
mesh_data = mesh.Mesh(np.zeros(len(faces), dtype=mesh.Mesh.dtype))
for i, f in enumerate(faces):
    for j in range(3):
        mesh_data.vectors[i][j] = vertices[f[j]]

# Write the mesh to file &#34;output.stl&#34;
mesh_data.save(&#39;output.stl&#39;)```

Fun fact... I have my brain as a .STL file. It took 48 hours to print and is 1:1 scale.
![Brain](/posts/stl_15.png)

I swear I didn&#39;t scale it up to make myself look smarter.
</code></pre></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://abenstirling.github.io/posts/botionnfc/><span class=title>Next »</span><br><span>BotionNFC</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://abenstirling.github.io/>Ben Stirling</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>